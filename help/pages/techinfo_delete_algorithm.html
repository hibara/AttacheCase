<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<head xmlns="http://www.w3.org/1999/html">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="stylesheet" type="text/css" href="../css/help.css" />
	<title>元ファイルの削除方法について</title>
</head>
<body>

<h1>元ファイルの削除方法について</h1>

<div class="paragraph">

<p>
暗号化した際に、元ファイルを削除することもできますが、
一応はセキュリティーを考慮した削除方法をとっています。
</p>

<p>
Windowsでファイルを削除すると、通常ファイルの「住所」だけが消される仕組みになっています。
つまり見た目は消えていますが、ファイル本体はハードディスク上に残っているということになります。
これを、市販の復旧ユーティリティーソフト等が見つけ復活させるわけです。
</p>

<p>
そこでアタッシェケースでは、削除する前にそのファイルサイズ分、乱数（めちゃくちゃな数字）で書き込み、
さらにNULL文字（空文字）で同様の上書きを行っています（「オプション」で、その書き込みの回数や方法は指定できます）。
さらにその後、ファイルサイズを 0 にしてから、ようやく削除しています。
</p>

<p>
なので、たとえファイル復旧ユーティリティーで復活を試みても、サイズが 0 になったファイルが見つかるか、
NULLで埋め尽くされた断片がいくつも見つかるだけになるかと思います。
</p>

<p>
ただ、これも完全ではないようです。まれにファイルの一部が別のところに書き込まれ、
残ってしまうこともありますし、2000/XPでは暗号化ファイルを初めとして、完全削除は仕様上、たいへん難しくなっています。
優秀なツールを使い、大量の時間をかければ、解析と復活は可能でしょう。
</p>

<p>
セクタ単位でディスクを解析して、直接書き込むなどの方法も考えましたが、
作者に、物理ドライブアクセスを安全に行うほどのプログラミング能力がないのと、
たとえ実現したとしても、処理に膨大な時間がかかります。セキュリティーの「コスト」を考えると、
わざわざそこまでするソフトでもないかなと判断し、採用は見送っています。
</p>

<p>
基本的には、元ファイルは「完全に削除できない」と考えてください。
ある程度の復活を防ぎ、解析しにくくはするという程度の代物です。
</p>

<p>
もしもファイルを厳重に管理したいのであれば、削除には市販の削除ユーティリティーを使うか、
元ファイルの残骸が意図しない形で残らぬよう、USBフラッシュメモリー上で暗号処理をせず、
きちんとローカルで行ってからコピーするなどの対策が必要でしょう。
</p>

</div>
<hr />
<p>Copyright&copy; 2012 M.Hibara, All rights Reserved. </p>

</body>
</html>